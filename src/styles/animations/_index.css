/* ========================================
 * CORE ANIMATIONS
 * ======================================== */

@keyframes md-spin {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

.md-spin {
	animation: md-spin 1s linear infinite;
}

/* ========================================
 * UI ELEMENT ANIMATIONS
 * ======================================== */

.dropdown-arrow {
	transition: transform 200ms ease;
}

.dropdown-arrow--open {
	transform: rotate(180deg);
}

/* ========================================
 * VERSION/OUTPUT ANIMATIONS
 * ======================================== */

@keyframes version-pulse {
	0%,
	50%,
	100% {
		transform: scale(1);
		box-shadow: none;
	}
}

@keyframes badge-pulse {
	0%,
	100% {
		transform: scale(1);
		box-shadow: none;
	}
	50% {
		transform: scale(1);
		box-shadow: none;
	}
}

@keyframes status-pulse {
	0%,
	100% {
		opacity: 1;
		transform: scale(1);
	}
	50% {
		opacity: 0.5;
		transform: scale(0.8);
	}
}

@keyframes version-created {
	0% {
		opacity: 0;
		transform: translateY(-10px) scale(0.95);
	}
	100% {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

.version-just-created {
	animation: version-created 400ms ease-out;
}

@keyframes output-fade-in {
	0% {
		opacity: 0;
		transform: translateY(8px);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}

.output-animate-in {
	animation: output-fade-in 300ms ease-out;
}

@keyframes version-switch {
	0% {
		opacity: 0.5;
		transform: scale(0.98);
	}
	100% {
		opacity: 1;
		transform: scale(1);
	}
}

.version-switching {
	animation: version-switch 200ms ease-out;
}

/* ========================================
 * GENERATION STATE ANIMATIONS
 * ======================================== */

@keyframes generating-border-shimmer {
	0%,
	100% {
		border-color: var(--color-outline);
	}
	50% {
		border-color: color-mix(
			in srgb,
			var(--color-primary) 50%,
			var(--color-outline)
		);
	}
}

@keyframes generating-soft-glow {
	0%,
	100% {
		box-shadow:
			0 6px 12px rgba(0, 0, 0, 0.18),
			0 0 0 1px color-mix(in srgb, var(--color-primary) 10%, transparent);
	}
	50% {
		box-shadow:
			0 6px 12px rgba(0, 0, 0, 0.18),
			0 0 16px 1px color-mix(in srgb, var(--color-primary) 20%, transparent);
	}
}

/* ----------------------------------------
 * Workbench Generating State
 * Elegant dimming with smooth transitions
 * ---------------------------------------- */

/* Header dims during generation */
.workbench--generating .simple-workbench__header {
	opacity: 0.35;
	pointer-events: none;
	filter: saturate(0.7);
	transition:
		opacity 0.4s ease,
		filter 0.4s ease;
}

/* Input pane dims but remains visible */
.workbench--generating .prompt-input-pane {
	opacity: 0.45;
	filter: saturate(0.8);
	transition:
		opacity 0.4s ease,
		filter 0.4s ease;
}

/* Disable interactions on input pane content during generation */
.workbench--generating .prompt-input-pane textarea,
.workbench--generating .prompt-input-pane .model-selector {
	pointer-events: none;
}

/* Keep the stop button fully visible and interactive */
.workbench--generating .prompt-input-pane .run-button-container {
	opacity: 1;
	pointer-events: auto;
	filter: none;
	/* Subtle pulse to draw attention */
	animation: generating-stop-pulse 1.5s ease-in-out infinite;
}

@keyframes generating-stop-pulse {
	0%,
	100% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.05);
	}
}

/* Output panel stays fully visible with subtle activity indicator */
.output-generating {
	animation:
		generating-border-shimmer 2.5s ease-in-out infinite,
		generating-soft-glow 2.5s ease-in-out infinite;
}

/* Resize handle dims during generation */
.workbench--generating .panel-resize-container {
	opacity: 0.3;
	pointer-events: none;
	transition: opacity 0.3s ease;
}

/* Restore normal state when not generating */
.simple-workbench__header,
.prompt-input-pane,
.panel-resize-container {
	transition:
		opacity 0.3s ease,
		filter 0.3s ease;
}

/* ========================================
 * PAGE ANIMATIONS
 * ======================================== */

@keyframes page-fade-in {
	0% {
		opacity: 0;
		transform: translateY(12px);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}

.simple-workbench,
.page-animate {
	animation: page-fade-in 800ms cubic-bezier(0.16, 1, 0.3, 1);
}
